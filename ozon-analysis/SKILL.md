---
name: ozon-analysis
description: Анализ данных из Ozon (продажи, заказы, реклама) через Ozon API.
---

# Ozon Analysis

Скилл для работы с данными Ozon по продажам, заказам и рекламе. 
Агент **не хранит и не показывает API-ключи**, использует только переменные окружения. Агент экономно использует токены.

## Когда использовать

Используй этот скилл, когда пользователь просит:
- показать **продажи** по Ozon: выручка, количество заказов, средний чек, топ товаров;
- выгрузить **заказы** за период и сводку по статусам;
- проанализировать **рекламные кампании Ozon**: показы, клики, CTR, расходы, заказы, выручку.

Примеры запросов:
- «Покажи продажи Ozon за последние 7 дней по Под кремом»
- «Сколько заказов и какая выручка за прошлый месяц?»
- «Топ товаров по выручке за этот месяц»
- «Разбор рекламных кампаний Ozon: что работает, что сливает бюджет»

## Переменные окружения (обязательные)

> Ключи и ID нельзя присылать в чат. Их нужно прописать на сервере в окружение.

Для продаж и заказов (Seller API):
- `OZON_SELLER_CLIENT_ID` — client_id магазина в Ozon Seller API
- `OZON_SELLER_API_KEY` — api_key магазина в Ozon Seller API

Для рекламы (Performance / Advertising API), если используется отдельный ключ:
- `OZON_ADS_CLIENT_ID` — client_id рекламного кабинета
- `OZON_ADS_API_KEY` — api_key рекламного кабинета

Если для нескольких проектов используются разные кабинеты, можно завести отдельные переменные с префиксами, например:
- `OZON_SELLER_CLIENT_ID_PODKREMOM`
- `OZON_SELLER_API_KEY_PODKREMOM`

Агент должен **явно выбирать**, с каким набором переменных работать, если проектов несколько.

## Основные режимы работы

### 1. Продажи

Цели:
- выручка по дням за период (день / неделя / месяц / произвольный диапазон);
- количество заказов;
- средний чек;
- топ товаров по выручке и количеству заказов;
- сравнение с предыдущим аналогичным периодом (например, последние 7 дней vs предыдущие 7).

Типовой ответ:
- краткие итоги: выручка, заказы, средний чек;
- 3–5 топ-товаров;
- динамика vs прошлый период (рост/падение в процентах);
- 2–3 ключевых вывода.

### 2. Заказы

Цели:
- список заказов за период (агрегированно, без лишней детализации);
- сводка по статусам: новые / в пути / доставлены / отменены;
- выделение проблемных областей: много отмен, долгие доставки.

Типовой ответ:
- сколько заказов всего;
- распределение по статусам;
- при необходимости — несколько примеров проблемных заказов (ID + статус + дата), но **без персональных данных покупателя**.

### 3. Реклама

Цели:
- базовый отчёт по кампаниям: показы, клики, CTR, расходы;
- заказы и выручка, если Ozon отдаёт атрибуцию по рекламе;
- выделить кампании-драйверы и кампании-провалы.

Типовой ответ:
- общие метрики по рекламе за период;
- топ‑3 кампаний по выручке / ROAS;
- кампании с высоким расходом и слабым результатом;
- 2–3 рекомендации: где урезать, что усилить.

## Ограничения и безопасность

- Никогда не логировать и не выводить значения `OZON_*_API_KEY` и `OZON_*_CLIENT_ID`.
- Если переменная окружения отсутствует, агент должен **сказать об этом явно** и попросить настроить её на сервере (без передачи ключа в чат).
- Не выгружать персональные данные покупателей (ФИО, телефон, email, адрес). Работать только с агрегированной статистикой и обезличенными ID заказов.

## Формат ответов

- Коротко и по делу: сначала итоги (цифры), потом 2–3 вывода.
- Если данных много (много кампаний/товаров), показывать топ‑N (3–10) + общий итог.
- При сравнении периодов — явно указывать, какие периоды сравниваются.

## Реализация (подсказка для кода)

- Использовать официальный Ozon API (Seller/Performance).
- Периоды:
  - предустановленные: сегодня, вчера, последние 7 дней, последние 30 дней, текущий месяц, прошлый месяц;
  - при необходимости — явные даты `YYYY-MM-DD`.
- Для больших выборок использовать постраничную выгрузку и агрегировать данные перед ответом.

Этот скилл описывает, **что** и **как** агент должен делать с данными Ozon. 
Конкретные скрипты/запросы к API реализуются отдельно, с использованием переменных окружения, указанных выше.